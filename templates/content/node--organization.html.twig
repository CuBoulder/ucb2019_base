{#
/**
 * Theme layout to display a UCB Organization Page.
 *
 * Created by jsparks on 7/8/19
 */
#}

{{ attach_library('ucb2019_base/ucb-organization-page') }}

{%
    set classes = [
    'node',
    'node--type-' ~ node.bundle|clean_class,
    node.isPromoted() ? 'node--promoted',
    node.isSticky() ? 'node--sticky',
    not node.isPublished() ? 'node--unpublished',
    view_mode ? 'node--view-mode-' ~ view_mode|clean_class,
]
%}

{#Dummy variable to ensure that all content tags are set for caching purposes#}
{% set content_render = content|render %}

<article{{attributes.addClass(classes)}}>
    <div itemscope itemtype="https://schema.org/Organization" class="ucb-org-organization-container container">
        {% if content.field_ucb_org_ancestor_org|render or content.field_ucb_org_parent_org|render or content.field_ucb_org_related_org|render %}
        <div class="ucb-org-header row">
            <div class="ucb-org-header col">
                {# check to see if there's is a parent or ancestor org and display that info here#}
                {% if content.field_ucb_org_ancestor_org|render %}
                    {{ content.field_ucb_org_ancestor_org }}
                {% endif %}
                {% if content.field_ucb_org_parent_org|render %}
                    {{ content.field_ucb_org_parent_org }}
                {% endif %}
                {% if content.field_ucb_org_related_org|render %}
                    {{ content.field_ucb_org_related_org }}
                {% endif %}
            </div>
        </div>
        {% endif %}
        <div class="ucb-org-content-row row">
            <section class="ucb-org-content-section col-md-8">
                {% if content.field_ucb_org_description %}
                    <div itemprop="description" class="ucb-org-description">
                        {{ content.field_ucb_org_description|render }}
                    </div>
                {% endif %}

                <div class="ucb-org-contact-info">
                    <h2>Contact Information</h2>
                    <ul class="ucb-org-contact-buttons-list">
                        {% if content.field_ucb_org_telephone|render %}
                            <li>{{ content.field_ucb_org_telephone }}</li>
                        {% endif %}
                        {% if content.field_ucb_org_fax_number|render %}
                            <li>{{ content.field_ucb_org_fax_number }}</li>
                        {% endif %}
                        {% if content.field_ucb_org_email|render %}
                            <li>{{ content.field_ucb_org_email }}</li>
                        {% endif %}
                        {% if content.field_ucb_org_website_url|render %}
                            <li>{{ content.field_ucb_org_website_url }}</li>
                        {% endif %}
                        {% if content.field_ucb_org_directory_url|render %}
                            <li>{{ content.field_ucb_org_directory_url }}</li>
                        {% endif %}
                    </ul>
                </div>

                {% if content.field_ucb_org_social_contact|render %}
                    <div class="ucb-org-social-div">
                        <h2>Social</h2>
                        <ul class="ucb-org-social-list">
                            {{ content.field_ucb_org_social_contact }}
                        </ul>
                    </div>
                {% endif %}

                {% if content.field_ucb_org_additional_contact|render %}
                    <div class="ucb-org-addtional-contacts">
                        <h2>Additional Contacts</h2>
                        <ul class="ucb-org-additional-contact-list list-style-none">
                            {{ content.field_ucb_org_additional_contact }}
                        </ul>
                    </div>
                {% endif %}

                {% if content.field_ucb_org_additional_links|render %}
                <div class="ucb-org-additional-links">
                    <h2>Links</h2>
                    <ul class="ucb-org-additional-links list-style-none">
                        {{ content.field_ucb_org_additional_links }}
                    </ul>
                </div>
                {% endif %}

            </section>
            <section class="ucb-org-address-section col-md-4">
                {% if content.field_ucb_org_id_campus_map|render %}
                    {% set mapURL = "https://www.colorado.edu/map/?id=336#!m/" ~ content.field_ucb_org_id_campus_map|render|striptags|trim %}
                    <div class="ucb-org-map-embed">
                        <a href="{{ mapURL }}" style="display:block; width:100%; height:300px; background-image:url(https://staticmap.concept3d.com/map/static-map/?map=336&loc={{ content.field_ucb_org_id_campus_map|render|striptags|trim }});">
                    <span class="embed-map-label">
                        View location on the Campus Map
                    </span>
                        </a>
                    </div>
                {% endif %}
                <section itemprop="address" itemscope itemtype="https://schema.org/PostaAddress" class="ucb-org-address-details">
                    <ul class="ucb-org-address-list">
                        {% if content.field_ucb_org_campus_mail_box|render %}
                            <li>{{ content.field_ucb_org_campus_mail_box|render|striptags|trim }}</li>
                        {% endif %}
                        {% if content.field_ucb_org_street_address|render %}
                            <li><span itemprop="streetAddress">{{ content.field_ucb_org_street_address|render|striptags|trim }}</span></li>
                        {% endif %}
                        {% if content.field_ucb_org_address_locality|render %}
                            <li><span itemprop="addressLocality">{{ content.field_ucb_org_address_locality|render|striptags|trim }}</span></li>
                        {% endif %}
                        {% if content.field_ucb_org_address_region|render %}
                            <li><span itemprop="addressRegion">{{ content.field_ucb_org_address_region|render|striptags|trim }}</span></li>
                        {% endif %}
                        {% if content.field_ucb_org_postal_code|render %}
                            <li><span itemprop="postalCode">{{ content.field_ucb_org_postal_code|render|striptags|trim }}</span></li>
                        {% endif %}
                        {% if content.field_ucb_org_adress_country|render %}
                            <li><span itemprop="addressCountry">{{ content.field_ucb_org_adress_country|render|striptags|trim }}</span></li>
                        {% endif %}
                        {% if content.field_ucb_org_location_desc|render %}
                            <li>{{ content.field_ucb_org_location_desc|render|striptags|trim }}</li>
                        {% endif %}
                    </ul>
                </section>
            </section>
        </div>
    </div>

</article>

